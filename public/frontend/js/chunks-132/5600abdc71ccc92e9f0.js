"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[560],{9560:(t,e,r)=>{r.r(e),r.d(e,{default:()=>i});var a=r(3424),s=r(746),n=r(7982);const o={name:"order-history",components:{user_sidebar:a.Z,orders:s.Z,shimmer:n.Z},data:function(){return{current:"order_history",url:"",page:2,next_page_url:!1,is_shimmer:!1,loading:!1}},mounted:function(){this.getOrders()},computed:{orders:function(){return this.$store.getters.getUserOrderList},baseUrl:function(){return this.$store.getters.getBaseUrl},shimmer:function(){return this.$store.state.module.shimmer}},methods:{loadMoreData:function(){var t=this,e=this.page;this.loading=!0,this.url=this.baseUrl+"/home/user/order-list/?page="+e,axios.get(this.url).then((function(e){if(t.loading=!1,e.data.error)toastr.error(e.data.error,t.lang.Error+" !!");else{var r=e.data.orderList;if(r.data.length>0)for(var a=0;a<r.data.length;a++)t.orders.data.push(r.data[a])}t.next_page_url=e.data.orderList.next_page_url,t.page++})).catch((function(e){t.loading=!1}))},getOrders:function(){var t=this,e=this.baseUrl+"/home/user/order-list/?page=1";axios.get(e).then((function(e){t.next_page_url=e.data.orderList.next_page_url,t.$store.commit("getUserOrderList",e.data.orderList),t.is_shimmer=!0})).catch((function(e){t.is_shimmer=!0,e.response.status}))}}};const i=(0,r(1900).Z)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"sg-page-content"},[r("section",{staticClass:"sg-global-content"},[r("div",{staticClass:"container"},[r("div",{staticClass:"row"},[r("user_sidebar",{attrs:{current:t.current}}),t._v(" "),r("div",{staticClass:"col-lg-9"},[r("div",{staticClass:"sg-table"},[r("div",{staticClass:"title justify-content-between"},[t.lengthCounter(t.orders.data)>0?r("h1",[t._v(t._s(t.lang.order_history))]):0==t.lengthCounter(t.orders.data)?r("h1",[t._v(t._s(t.lang.no_order_founds))]):r("h1",[t._v(t._s(t.lang.loading))])]),t._v(" "),r("form",{staticClass:"woocommerce-cart-form",attrs:{action:"#"}},[t.is_shimmer?r("orders",{attrs:{orders:t.orders.data,user_dashboard:!1}}):t.shimmer?t._l(8,(function(t,e){return r("table",{staticClass:"table mb-3"},[r("shimmer",{key:e,attrs:{height:70}})],1)})):t._e()],2),t._v(" "),t.next_page_url?r("div",{staticClass:"show-more-button"},[t.loading?r("loading_button",{attrs:{class_name:"btn btn-primary"}}):r("a",{staticClass:"btn btn-primary",attrs:{href:"javascript:void(0)"},on:{click:function(e){return t.loadMoreData()}}},[t._v(t._s(t.lang.show_more))])],1):t._e()])])],1)])])])}),[],!1,null,null,null).exports},746:(t,e,r)=>{r.d(e,{Z:()=>s});const a={name:"orders",props:["orders","user_dashboard"],data:function(){return{url:"",order_dropdown:"",page:2}},mounted:function(){},computed:{orderUrls:function(){return this.$store.getters.getOrderUrl}},methods:{removeOrder:function(t,e){var r=this,a=this.getUrl("user/remove-order/"+t.id);this.$Progress.start(),axios.get(a).then((function(t){t.data.error?toastr.error(t.data.error,r.lang.Error+" !!"):(toastr.success(t.data.success,r.lang.Success+" !!"),r.show_load_more=r.orders.next_page_url,r.page--,r.orders[e].order.is_deleted=1),r.order_dropdown="",r.$Progress.finish()}))},cancelOrder:function(t,e){var r=this,a=this.getUrl("user/cancel-order/"+t.id);confirm("Are you sure?")&&(this.$Progress.start(),axios.get(a).then((function(t){t.data.error?toastr.error(t.data.error,r.lang.Error+" !!"):(r.orders[e].order.delivery_status="canceled",r.orders[e].order.payment_status="unpaid"==r.orders[e].order.payment_status?"unpaid":r.lang.refunded_to_wallet,r.$store.dispatch("user",t.data.user)),r.order_dropdown="",r.$Progress.finish()})))},orderDropdown:function(t){""==this.order_dropdown?this.order_dropdown=t:this.order_dropdown=""},download:function(t,e){var r=this;axios.get(this.getUrl("user/invoice/download/"+t),{responseType:"arraybuffer"}).then((function(t){var a=new Blob([t.data],{type:"application/pdf"}),s=document.createElement("a");s.href=window.URL.createObjectURL(a),s.download=e+".pdf",s.click(),r.order_dropdown=""}))}}};const s=(0,r(1900).Z)(a,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"order-table"},[r("table",{staticClass:"table"},[r("thead",[r("tr",[r("th",{attrs:{scope:"col"}},[t._v(t._s(t.lang.product))]),t._v(" "),r("th",{attrs:{scope:"col"}},[t._v(t._s(t.lang.date))]),t._v(" "),r("th",{attrs:{scope:"col"}},[t._v(t._s(t.lang.delivery_status))]),t._v(" "),r("th",{attrs:{scope:"col"}},[t._v(t._s(t.lang.pay_status))]),t._v(" "),r("th",{attrs:{scope:"col"}},[t._v(t._s(t.lang.total))]),t._v(" "),r("th",{attrs:{scope:"col"}},[t._v(t._s(t.lang.action))])])]),t._v(" "),r("tbody",t._l(t.orders,(function(e,a){return 0==e.is_deleted?r("tr",{key:a},[r("th",{attrs:{scope:"row"}},[r("div",{staticClass:"product"},[r("div",{staticClass:"text pl-1"},[e.product_name?r("p",{staticClass:"text-ellipse"},[t._v(t._s(e.product_name))]):t._e(),t._v(" "),e.variation?r("span",[t._v(" "+t._s(e.variation))]):r("span",[t._v(" "+t._s(e.sku))])])])]),t._v(" "),r("td",[t._v(t._s(e.order_date))]),t._v(" "),r("td",{staticClass:"text-capitalize"},[r("div",{class:"pending"==e.delivery_status?"pending":"delivered"==e.delivery_status?"complete":"canceled"==e.delivery_status?"cancel":"delivery-info"},[r("span",[t._v("\n                    "+t._s("pending"==e.delivery_status?t.lang.Pending:"delivered"==e.delivery_status?t.lang.delivered:"canceled"==e.delivery_status?t.lang.Canceled:"confirmed"==e.delivery_status?t.lang.Confirmed:"picked_up"==e.delivery_status?t.lang.picked_up:"on_the_way"==e.delivery_status?t.lang.on_the_way:"")+"\n                ")])])]),t._v(" "),r("td",[r("div",{staticClass:"paid od_payment_status",class:"paid"==e.payment_status?"paid":"unpaid"},[r("span",[t._v("\n                    "+t._s("paid"==e.payment_status?t.lang.Paid:"unpaid"==e.payment_status?t.lang.Unpaid:t.lang.refunded_to_wallet)+"\n                ")])])]),t._v(" "),r("td",[r("span",[t._v(t._s(t.priceFormat(e.total_payable)))])]),t._v(" "),r("td",[r("div",{staticClass:"dropdown"},[r("button",{staticClass:"dropdown-toggle btn-primary",class:e.order_id==t.order_dropdown?"show":"",attrs:{type:"button",id:"","data-bs-toggle":"dropdown","aria-expanded":"false"},on:{click:function(r){return t.orderDropdown(e.order_id)}}},[t._v(t._s(t.lang.Actions)+"\n                    ")]),t._v(" "),r("ul",{staticClass:"dropdown-menu text-capitalize",class:e.order_id==t.order_dropdown?"show":""},["pending"==e.delivery_status?r("li",[r("a",{attrs:{href:"javascript:void(0)"},on:{click:function(r){return t.cancelOrder(e.order_id,a)}}},[t._v(t._s(t.lang.cancel))])]):t._e(),t._v(" "),r("li",["unpaid"==e.payment_status&&"cash_on_delivery"!=e.payment_type&&"cancelled"!=e.delivery_status&&"offline_method"!=e.delivery_status?r("router-link",{attrs:{to:{name:"payment",params:{code:e.code}}}},[t._v(t._s(t.lang.pay_now))]):t._e()],1),t._v(" "),r("li",[r("router-link",{attrs:{to:{name:"get.invoice",params:{orderCode:e.code}}}},[t._v(t._s(t.lang.view))])],1),t._v(" "),r("li",[r("a",{attrs:{href:"javascript:void(0)"},on:{click:function(r){return t.download(e.order_id,e.code)}}},[t._v(t._s(t.lang.download))])]),t._v(" "),e.product_file_id&&"paid"==e.payment_status?r("li",t._l(t.orderUrls,(function(a,s){return s==e.id?r("a",{key:s,attrs:{href:a}},[t._v(t._s(t.lang.download_file))]):t._e()})),0):t._e(),t._v(" "),"delivered"==e.delivery_status||"canceled"==e.delivery_status?r("li",[r("a",{attrs:{href:"javascript:void(0)"},on:{click:function(r){return t.removeOrder(e.order,a)}}},[t._v(t._s(t.lang.delete))])]):t._e()])])])]):t._e()})),0)])])}),[],!1,null,null,null).exports},7982:(t,e,r)=>{r.d(e,{Z:()=>s});const a={name:"shimmer.vue",props:["height"],data:function(){return{style:{height:this.height+"px"}}}};const s=(0,r(1900).Z)(a,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("img",{staticClass:"shimmer",style:[t.height?t.style:null],attrs:{src:t.defaultAssets.shimmer,alt:"shimmer"}})}),[],!1,null,null,null).exports},3424:(t,e,r)=>{r.d(e,{Z:()=>s});const a={name:"user_sidebar",props:["current","addresses"],data:function(){return{loading:!1,download_url:!1}},mounted:function(){this.checkAuth()},computed:{totalReward:function(){return this.$store.getters.getTotalReward},modalType:function(){return this.$store.getters.getModalType}},components:{shimmer:r(7982).Z},methods:{checkAuth:function(){var t=this,e=this.getUrl("home/check-auth");axios.get(e).then((function(e){t.$store.dispatch("user",e.data.user),t.$store.commit("getOrderUrl",e.data.order_urls),t.authUser?"admin"==t.authUser.user_type&&t.$router.push({name:"home"}):t.$router.push({name:"login"}),e.data.reward&&t.$store.commit("setTotalReward",e.data.reward),e.data.download_urls&&(t.download_url=!0)}))},convertReward:function(){var t=this,e=this.getUrl("user/convert-reward"),r={amount:this.converted_reward/this.settings.reward_convert_rate,reward:this.converted_reward};r.amount>0&&this.totalReward.rewards>=this.converted_reward&&confirm("Are You Sure! You want to Convert ?")&&(this.loading=!0,axios.post(e,r).then((function(e){t.loading=!1,e.data.error?toastr.error(e.data.error,t.lang.Error+" !!"):(toastr.success(e.data.success,t.lang.Success+"!!"),$("#convert_reward").modal("hide"),t.converted_reward="",t.$store.dispatch("user",e.data.user),t.$store.commit("setTotalReward",e.data.reward))})).catch((function(e){t.loading=!1})))}}};const s=(0,r(1900).Z)(a,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.authUser?r("div",{staticClass:"col-lg-3"},[r("div",{staticClass:"profile-details position-relative"},[r("div",{staticClass:"profile-thumb"},[r("img",{staticClass:"img-fluid",attrs:{src:t.authUser.profile_image,alt:t.authUser.full_name}})]),t._v(" "),r("h2",[t._v(t._s(t.authUser.full_name)+" "),r("router-link",{staticClass:"d-inline",attrs:{to:{name:"edit.profile"}}},[r("span",{staticClass:"mdi mdi-name mdi-pencil"})])],1),t._v(" "),r("a",{attrs:{href:"javascript:void(0)"}},[t._v(t._s(t.authUser.email))]),t._v(" "),1==t.settings.seller_system?r("router-link",{staticClass:"be_seller base",attrs:{to:{name:"migrate.seller"}}},[t._v("\n            "+t._s(t.lang.be_a_seller)+" "),r("span",{staticClass:"mdi mdi-name mdi-store-outline"})]):t._e()],1),t._v(" "),r("div",{staticClass:"sidebar-menu"},[r("ul",{staticClass:"global-list"},[r("li",{class:{active:"dashboard"===t.current}},[r("router-link",{attrs:{to:{name:"dashboard"}}},[r("span",{staticClass:"mdi mdi-name mdi-view-dashboard-outline"}),t._v(" "+t._s(t.lang.dashboard)+"\n                ")])],1),t._v(" "),r("li",{class:{active:"addresses"===t.current}},[r("router-link",{attrs:{to:{name:"addresses"}}},[r("span",{staticClass:"mdi mdi-name mdi-map-marker-outline"}),t._v("\n                    "+t._s(t.lang.addresses)+"\n                ")])],1),t._v(" "),r("li",{class:{active:"notification"===t.current}},[r("router-link",{attrs:{to:{name:"notification"}}},[r("span",{staticClass:"mdi mdi-name mdi-bell-outline"}),t._v("\n                    "+t._s(t.lang.notification)+"\n                ")])],1),t._v(" "),r("li",{class:{active:"order_history"===t.current}},[r("router-link",{attrs:{to:{name:"order.history"}}},[r("span",{staticClass:"mdi mdi-name mdi-cart-outline"}),t._v("\n                    "+t._s(t.lang.order_history)+"\n                ")])],1),t._v(" "),t.download_url?r("li",{class:{active:"digital_product_order_history"===t.current}},[r("router-link",{attrs:{to:{name:"orders.digital.product"}}},[r("span",{staticClass:"mdi mdi-name mdi-cart-arrow-down"}),t._v(" "+t._s(t.lang.digital_product_order)+"\n                ")])],1):t._e(),t._v(" "),1==t.settings.coupon_system?r("li",{class:{active:"gift_voucher"===t.current}},[r("router-link",{attrs:{to:{name:"gift.voucher"}}},[r("span",{staticClass:"mdi mdi-name mdi-wallet-giftcard"}),t._v("\n                    "+t._s(t.lang.gift_voucher)+"\n                ")])],1):t._e(),t._v(" "),r("li",{class:{active:"change_password"===t.current}},[r("router-link",{attrs:{to:{name:"change.password"}}},[r("span",{staticClass:"mdi mdi-name mdi-lock-outline"}),t._v("\n                    "+t._s(t.lang.change_password)+"\n                ")])],1),t._v(" "),1==t.settings.wallet_system?r("li",{class:{active:"wallet_history"===t.current}},[r("router-link",{attrs:{to:{name:"wallet.history"}}},[r("span",{staticClass:"mdi mdi-wallet-outline"}),t._v("\n                    "+t._s(t.lang.my_wallet)+"\n                ")])],1):t._e(),t._v(" "),t.addons.includes("reward")?r("li",{class:{active:"reward_history"===t.current}},[r("router-link",{attrs:{to:{name:"reward.history"}}},[r("span",{staticClass:"mdi mdi-vector-point"}),t._v(t._s(t.lang.my_rewards)+"\n                ")])],1):t._e(),t._v(" "),1==t.settings.seller_system?r("li",{class:{active:"followed_shop"===t.current}},[r("router-link",{attrs:{to:{name:"shop.followed"}}},[r("span",{staticClass:"mdi mdi-home-heart"}),t._v(t._s(t.lang.shop)+"\n                ")])],1):t._e()])]),t._v(" "),r("div",{staticClass:"modal fade reward",attrs:{id:"convert_reward",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[r("div",{staticClass:"modal-dialog modal-md modal-dialog-centered modal-dialog-scrollable"},[r("div",{staticClass:"modal-content"},[r("div",{staticClass:"modal-header"},[r("h5",{staticClass:"modal-title"},[t._v(t._s(t.lang.reward_point))]),t._v(" "),t._m(0)]),t._v(" "),r("div",{staticClass:"modal-body reward_modal"},[r("form",{on:{submit:function(e){return e.preventDefault(),t.convertReward.apply(null,arguments)}}},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-lg-12 text-center"},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"reward"}},[t._v(t._s(t.lang.reward_point)+" ")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.converted_reward,expression:"converted_reward"}],staticClass:"form-control",attrs:{type:"text",id:"reward",placeholder:t.lang.enter_point_you_want_convert},domProps:{value:t.converted_reward},on:{input:function(e){e.target.composing||(t.converted_reward=e.target.value)}}})]),t._v(" "),null!=t.totalReward?r("div",{staticClass:"text-start"},[r("p",[t._v("Available Points to Convert : "+t._s(t.totalReward.rewards))]),t._v(" "),r("p",[t._v(t._s(t.settings.reward_convert_rate)+t._s(t.lang.reward_points)+t._s(t.priceFormat(1)))]),t._v(" "),t.totalReward.rewards>0?r("p",[t._v(t._s(t.lang.total_amount_you_will_get)+"\n                                        "+t._s(t.priceFormat(t.converted_reward/t.settings.reward_convert_rate)))]):t._e()]):t._e(),t._v(" "),t.loading?r("loading_button",{attrs:{class_name:"btn btn-primary mt-3"}}):r("button",{staticClass:"btn btn-primary mt-3",class:{disable_btn:t.converted_reward<t.settings.reward_convert_rate||t.totalReward.rewards<t.converted_reward},attrs:{type:"submit"}},[t._v("\n                                    "+t._s(t.lang.covert_rewards)+"\n                                ")])],1)])])])])])])]):t._e()}),[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("button",{staticClass:"close modal_close",attrs:{type:"button","data-bs-dismiss":"modal","aria-label":"Close"}},[r("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],!1,null,null,null).exports}}]);