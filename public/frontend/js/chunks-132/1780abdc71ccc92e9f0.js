"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[178],{3178:(t,a,s)=>{s.r(a),s.d(a,{default:()=>n});var i=s(7982),r=s(5463);const e={name:"cart",components:{shimmer:i.Z,coupon:r.Z},data:function(){return{carts:[],seller_carts:[],coupon_area:!0,coupon:[],cart_length:0,collapseAttribute:[],disable:!1,is_shimmer:!1,coupon_list:[]}},mounted:function(){this.getCheckout()},watch:{cartList:function(t,a){this.getCheckout()}},computed:{cartList:function(){return this.$store.getters.getCarts},shimmer:function(){return this.$store.state.module.shimmer}},methods:{getCheckout:function(){var t=this;this.$Progress.start();var a=this.getUrl("cart/list");axios.get(a).then((function(a){if(t.is_shimmer=!0,t.$store.commit("setShimmer",0),a.data.error)t.$Progress.fail(),toastr.error(a.data.error,t.lang.Error+" !!");else{t.$Progress.finish();var s=a.data.checkouts,i=a.data.coupons;t.parseData(t.cartList,s,i)}}))},deleteCart:function(t){var a=this;if(confirm("Are you sure?")){var s=this.getUrl("cart/delete/"+t);axios.get(s).then((function(t){t.data.error?toastr.error(t.data.error,a.lang.Error+" !!"):a.$store.dispatch("carts",t.data.carts)}))}},checkout:function(){return this.authUser?"customer"!=this.authUser.user_type?toastr.warning(this.lang.you_are_not_able_topurchase_products,this.lang.Warning+" !!"):void this.$router.push({name:"checkout"}):(toastr.error(this.lang.login_first,this.lang.Error+" !!"),this.$store.commit("setLoginRedirection",this.$route.name),this.$router.push({name:"login"}),!1)},parseData:function(t,a,s){if(this.resetForm(),this.collapseAttribute=[],this.carts=[],this.authUser){if(t)for(var i=0;i<t.length;i++)this.payment_form.quantity.push({id:t[i].id,quantity:t[i].quantity}),this.carts.push(t[i]),this.payment_form.sub_total+=parseFloat(t[i].price*t[i].quantity),this.payment_form.discount_offer+=parseFloat(t[i].discount)*t[i].quantity,"product_base"==this.settings.shipping_cost&&(this.payment_form.shipping_tax+=parseFloat(t[i].shipping_cost)),this.payment_form.tax+=parseFloat(t[i].tax*t[i].quantity)}else for(var r=0;r<t.length;r++)this.carts.push(t[r]),this.payment_form.quantity.push({id:t[r].id,quantity:t[r].quantity}),this.payment_form.sub_total+=t[r].price*t[r].quantity,this.payment_form.discount_offer+=parseFloat(t[r].discount*t[r].quantity),"product_base"==this.settings.shipping_cost&&(this.payment_form.shipping_tax+=t[r].shipping_cost),this.payment_form.tax+=parseFloat(t[r].tax*t[r].quantity);if(a)for(var e in this.seller_carts=a,this.coupon=a,this.seller_carts)this.collapseAttribute.push({name:a[e].name,image:a[e].image,status:!0}),"area_base"!=this.settings.shipping_cost&&(this.payment_form.shipping_tax+=parseFloat(a[e].shipping_cost)),this.payment_form.tax+=parseFloat(a[e].tax),1==this.settings.coupon_system&&(this.payment_form.coupon_discount+=parseFloat(a[e].discount));if(s&&1==this.settings.coupon_system){this.coupon_list=s;for(var o=0;o<s.length;o++)this.payment_form.coupon_discount+=parseFloat(s[o].discount)}this.payment_form.total=this.payment_form.sub_total+this.payment_form.tax+this.payment_form.shipping_tax-(this.payment_form.discount_offer+this.payment_form.coupon_discount)},cartPlus:function(t){var a=this;if(this.disable)return!1;if(this.payment_form.quantity[t].quantity<this.carts[t].current_stock){var s={id:this.carts[t].id,quantity:1};this.disable=!0;var i=this.getUrl("cart/update");axios.post(i,s).then((function(t){if(a.disable=!1,t.data.error)toastr.error(t.data.error,a.lang.Error+" !!");else{a.$store.dispatch("carts",t.data.carts);var s=t.data.coupons;a.parseData(a.cartList,t.data.checkouts,s)}})).catch((function(t){a.disable=!1}))}else toastr.warning(this.lang.Only+" "+this.carts[t].current_stock+" "+this.lang.items_available_at_this_time,this.lang.Warning+" !!")},cartMinus:function(t){var a=this;if(this.disable)return!1;if(this.payment_form.quantity[t].quantity>this.carts[t].min_quantity){var s={id:this.carts[t].id,quantity:-1,status:"minus"},i=this.getUrl("cart/update");this.disable=!0,axios.post(i,s).then((function(t){if(a.disable=!1,t.data.error)toastr.error(t.data.error,a.lang.Error+" !!");else{a.$store.dispatch("carts",t.data.carts);var s=t.data.coupons,i=t.data.checkouts;a.parseData(a.cartList,i,s)}}))}else toastr.warning(this.lang.please_order_minimum_of+" "+this.carts[t].min_quantity+" "+this.lang.Quantity,this.lang.Warning+" !!")},activeSeller:function(t){this.active_seller==t?this.active_seller=0:this.active_seller=t}}};var o=(0,s(1900).Z)(e,(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"sg-page-content"},[t.is_shimmer?s("div",{staticClass:"sg-breadcrumb"},[s("div",{staticClass:"container"},[s("ol",{staticClass:"breadcrumb justify-content-center"},[s("li",{staticClass:"breadcrumb-item"},[t._v(t._s(t.lang.view_cart))]),t._v(" "),s("li",{staticClass:"breadcrumb-item"},[s("a",{attrs:{href:"javascript:void(0)"}},[t._v(t._s(t.lang.check_out))])]),t._v(" "),s("li",{staticClass:"breadcrumb-item"},[s("a",{attrs:{href:"javascript:void(0)"}},[t._v(t._s(t.lang.confirm_order))])])])])]):t._e(),t._v(" "),s("section",{staticClass:"sg-global-content"},[t.is_shimmer?s("div",{staticClass:"container"},[t.cartList&&t.cartList.length>0?s("div",{staticClass:"row"},[s("div",{staticClass:"col-lg-8 justify-content-end"},[s("div",{staticClass:"accordion",attrs:{id:"accordionExample"}},t._l(t.seller_carts,(function(a,i,r){return t.seller_carts?s("div",{staticClass:"accordion-item",class:{cart_accordion:t.collapseAttribute[r].status}},[s("div",{staticClass:"accordion-header",attrs:{id:"cart"+r}},[s("button",{staticClass:"accordion-button title",class:{collapsed:!t.collapseAttribute[r].status},attrs:{type:"button","data-bs-toggle":"collapse","data-bs-target":"#category","aria-expanded":"true","aria-controls":"collapse1"},on:{click:function(a){t.collapseAttribute[r].status=!t.collapseAttribute[r].status}}},[t._v("\n                  "+t._s(t.collapseAttribute[r].name)+"\n                ")])]),t._v(" "),s("div",{staticClass:"accordion-collapse collapse",class:{show:t.collapseAttribute[r].status},attrs:{id:"cart"+r,"aria-labelledby":"cart"+r,"data-bs-parent":"#accordionExample"}},[s("div",{staticClass:"accordion-body"},[s("div",{staticClass:"sg-table table-responsive"},[s("table",{staticClass:"table"},[s("thead",[s("tr",[s("th",{attrs:{scope:"col"}},[t._v(t._s(t.lang.product))]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v(t._s(t.lang.unit_price))]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v(t._s(t.lang.quantity))]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v(t._s(t.lang.total_price))]),t._v(" "),s("th",{attrs:{scope:"col"}},[t._v(t._s(t.lang.action))])])]),t._v(" "),s("tbody",t._l(t.carts,(function(a,r){return i==a.seller_id?s("tr",{key:r},[s("th",{attrs:{scope:"row"}},[s("div",{staticClass:"product"},[s("router-link",{attrs:{to:{name:"product.details",params:{slug:a.product_slug}}}},[s("span",{staticClass:"product-thumb"},[s("img",{staticClass:"img-fluid",attrs:{src:a.image_72x72,alt:a.product_name}})]),t._v(" "),s("div",{staticClass:"text"},[s("p",[t._v(t._s(a.product_name))]),t._v(" "),a.sku?s("span",[t._v(t._s(t.lang.SKU)+": "+t._s(a.sku))]):t._e()])])],1)]),t._v(" "),s("td",[a.discount>0?s("span",[s("del",[t._v(t._s(t.priceFormat(a.price)))])]):t._e(),t._v(" "),s("span",[t._v(t._s(t.priceFormat(a.price-a.discount)))])]),t._v(" "),1==a.is_digital_product?s("td",[t._v("\n                          1\n                        ")]):s("td",{attrs:{width:"10%"}},[s("div",{staticClass:"product-quantity"},[s("div",{staticClass:"quantity",attrs:{"data-trigger":"spinner"}},[s("a",{staticClass:"btn pull-left",attrs:{href:"javascript:void(0);","data-spin":"down"},on:{click:function(a){return t.cartMinus(r)}}},[s("span",{staticClass:"mdi mdi-name mdi-minus"})]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.payment_form.quantity[r].quantity,expression:"payment_form.quantity[index].quantity"}],staticClass:"input-text",attrs:{type:"text",name:"quantity",title:"quantity",readonly:""},domProps:{value:t.payment_form.quantity[r].quantity},on:{input:function(a){a.target.composing||t.$set(t.payment_form.quantity[r],"quantity",a.target.value)}}}),t._v(" "),s("a",{staticClass:"btn pull-right",attrs:{href:"javascript:void(0);","data-spin":"up"},on:{click:function(a){return t.cartPlus(r)}}},[s("span",{staticClass:"mdi mdi-name mdi-plus"})])])])]),t._v(" "),s("td",[a.discount>0?s("span",[s("del",[t._v(t._s(t.priceFormat(a.price*t.payment_form.quantity[r].quantity)))])]):t._e(),t._v(" "),s("span",[t._v(t._s(t.priceFormat((a.price-a.discount)*t.payment_form.quantity[r].quantity)))])]),t._v(" "),s("td",[s("div",{staticClass:"delete"},[s("a",{attrs:{href:"javascript:void(0)"},on:{click:function(s){return t.deleteCart(a.id)}}},[t._v(t._s(t.lang.delete))])])])]):t._e()})),0)])])])])]):t._e()})),0)]),t._v(" "),s("div",{staticClass:"col-lg-4 pl-lg-5"},[s("div",{staticClass:"order-summary"},[s("h6",[t._v(t._s(t.lang.price_details))]),t._v(" "),t.authUser?s("coupon",{attrs:{coupon_list:t.coupon_list,cartList:t.cartList}}):t._e(),t._v(" "),s("div",{staticClass:"sg-card"},[s("ul",{staticClass:"global-list"},[s("li",[t._v(t._s(t.lang.subtotal)+" "),s("span",[t._v(t._s(t.priceFormat(t.payment_form.sub_total)))])]),t._v(" "),s("li",[t._v(t._s(t.lang.tax)+" "),s("span",[t._v(t._s(t.priceFormat(t.payment_form.tax)))])]),t._v(" "),s("li",[t._v(t._s(t.lang.discount)),s("span",[t._v(t._s(t.priceFormat(t.payment_form.discount_offer)))])]),t._v(" "),"area_base"!=t.settings.shipping_cost?s("li",[t._v(t._s(t.lang.shipping_cost)),s("span",[t._v(t._s(t.priceFormat(t.payment_form.shipping_tax)))])]):t._e(),t._v(" "),1==t.settings.coupon_system?s("li",[t._v(t._s(t.lang.coupon_discount)),s("span",[t._v(t._s(t.priceFormat(t.payment_form.coupon_discount)))])]):t._e()]),t._v(" "),s("div",{staticClass:"order-total"},[s("p",[t._v(t._s(t.lang.total)+" "),s("span",[t._v(t._s(t.priceFormat(t.payment_form.total)))])])]),t._v(" "),s("router-link",{staticClass:"btn btn-primary",attrs:{to:{name:"checkout"}}},[t._v(t._s(t.lang.proceed_to_checkout)+"\n              ")])],1)],1)])]):s("div",{staticClass:"justify-content-center text-center"},[s("h4",{staticClass:"breadcrumb-item text-danger"},[t._v(" "+t._s(t.lang.no_product_found)+" ")])])]):t.shimmer?s("div",{staticClass:"container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-lg-8 justify-content-end"},t._l(4,(function(t,a){return s("shimmer",{key:a,staticClass:"mb-3",attrs:{height:100}})})),1),t._v(" "),s("div",{staticClass:"col-lg-4 pl-lg-5"},[s("shimmer",{attrs:{height:400}})],1)])]):t._e()])])}),[],!1,null,null,null);const n=o.exports},5463:(t,a,s)=>{s.d(a,{Z:()=>e});const i={name:"coupon",props:["coupon_list","cartList"],data:function(){return{loading:!1}},methods:{applyCoupon:function(){var t=this,a=this.getUrl("user/apply_coupon");this.payment_form.trx_id=this.cartList[0].trx_id,this.loading=!0,axios.post(a,this.payment_form).then((function(a){if(t.loading=!1,a.data.error)toastr.error(a.data.error,t.lang.Error+" !!");else{toastr.success(a.data.success,t.lang.Success+" !!"),t.carts=[];var s=a.data.carts,i=a.data.checkouts,r=a.data.coupons;t.$parent.parseData(s,i,r),t.payment_form.coupon_code=""}})).catch((function(a){t.loading=!1,toastr.success("Something Went Wrong","Error !!")}))},removeCoupon:function(t){var a=this;if(confirm("Are You Sure ?")){var s=this.getUrl("user/coupon-delete");this.disabled=!0;var i={trx_id:this.cartList[0].trx_id,coupon_id:t,user_id:this.authUser.id};axios.post(s,i).then((function(t){if(a.disabled=!1,t.data.error)toastr.error(t.data.error,a.lang.Error+" !!");else{toastr.success(t.data.success,a.lang.Success+" !!"),a.carts=[];var s=t.data.carts,i=t.data.checkouts,r=t.data.coupons;a.$parent.parseData(s,i,r),a.payment_form.coupon_code=""}})).catch((function(t){a.disabled=!1,toastr.success("Something Went Wrong","Error !!")}))}}}};var r=(0,s(1900).Z)(i,(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"accordion",attrs:{id:"couponAccordion"}},[s("div",{staticClass:"accordion-item"},[s("div",{staticClass:"accordion-header",attrs:{id:"headingOne"}},[s("button",{staticClass:"accordion-button",attrs:{type:"button","data-bs-toggle":"collapse","data-bs-target":"#couponCollapse","aria-expanded":"true","aria-controls":"collapseOne"}},[s("span",[s("img",{staticClass:"img-fluid",attrs:{src:t.getUrl("public/images/others/pencil1.png"),alt:"Image"}})]),t._v(t._s(t.lang.apply_coupon_code)+"\n      ")])]),t._v(" "),s("div",{staticClass:"accordion-collapse collapse",attrs:{id:"couponCollapse","aria-labelledby":"headingOne","data-bs-parent":"#couponAccordion"}},[s("div",{staticClass:"accordion-body"},[s("div",{staticClass:"coupon-code-list"},t._l(t.coupon_list,(function(a,i){return s("div",{key:i,staticClass:"coupon-code"},[s("h5",[t._v(t._s(a.title))]),t._v(" "),s("P",[t._v(t._s("flat"==a.discount_type?t.priceFormat(a.discount):a.coupon_discount+"% "+t.lang.off))]),t._v(" "),s("button",{staticClass:"btn-close",attrs:{type:"button","aria-label":"Close",disabled:t.disabled},on:{click:function(s){return t.removeCoupon(a.coupon_id)}}})],1)})),0),t._v(" "),s("form",{on:{submit:function(a){return a.preventDefault(),t.applyCoupon.apply(null,arguments)}}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.payment_form.coupon_code,expression:"payment_form.coupon_code"}],staticClass:"form-control",attrs:{type:"text",placeholder:t.lang.enter_coupon_code,required:""},domProps:{value:t.payment_form.coupon_code},on:{input:function(a){a.target.composing||t.$set(t.payment_form,"coupon_code",a.target.value)}}}),t._v(" "),t.loading?s("loading_button",{attrs:{class_name:"opacity_5"}}):s("button",[t._v(t._s(t.lang.apply))])],1)])])])])}),[],!1,null,"6ef17db5",null);const e=r.exports},7982:(t,a,s)=>{s.d(a,{Z:()=>r});const i={name:"shimmer.vue",props:["height"],data:function(){return{style:{height:this.height+"px"}}}};const r=(0,s(1900).Z)(i,(function(){var t=this,a=t.$createElement;return(t._self._c||a)("img",{staticClass:"shimmer",style:[t.height?t.style:null],attrs:{src:t.defaultAssets.shimmer,alt:"shimmer"}})}),[],!1,null,null,null).exports}}]);